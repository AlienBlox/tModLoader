<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tModLoader: Dedicated Server Utils</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="tModLoaderIcon-Small.png"/></td>
  <td id="projectalign">
   <div id="projectname">tModLoader<span id="projectnumber">&#160;v2022.09</span>
   </div>
   <div id="projectbrief">A mod to make and play Terraria mods</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__github_workspace_src_t_mod_loader__terraria_release_extras__dedicated_server_utils__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Dedicated Server Utils </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This directory contains utilities for managing a dedicated <em><b>Linux</b></em> server.</p>
<h1>Docker vs Management Script</h1>
<p >While both the Docker container and the management script can install and update tModLoader and any mods, there are a few key differences. Docker isolates tModLoader from your host system and increases security. The management script allows for direct access to your server and increased control as a result. If you are a public server operator or just prefer Docker, then go with the Docker Container, otherwise make use of the management script.</p>
<h1>Using The Management Script</h1>
<p >The <code>manage-tModLoaderServer.sh</code> script can be used to install tModLoader either directly from the GitHub release or from SteamCMD. The script is made to run fully standalone, so just download it to your server and run it. No other files from the repo are needed.</p>
<h2>Installing tModLoader</h2>
<h3>Via SteamCMD (recommended)</h3>
<ul>
<li>Ensure SteamCMD is installed and on your PATH. You can install SteamCMD from your package manager or <a href="https://developer.valvesoftware.com/wiki/SteamCMD">Valve's Wiki</a>.</li>
<li>Run <code>./manage-tModLoaderServer.sh --install --username your_steam_username</code>.</li>
<li>You will be prompted for your password (and your 2fa code if applicable).</li>
<li>By default, tModLoader will be installed to <code>~/Steam/steamapps/common/tModLoader</code>. To specify an installation directory, use <code>--folder /full/path/from/root</code></li>
</ul>
<h3>From GitHub</h3>
<ul>
<li>Run <code>./manage-tModLoaderServer.sh --install --github</code>.</li>
<li>By default, tModLoader will be installed to <code>~/tModLoader</code>. To specify an installation directory, use <code>--folder /path/to/install</code>.</li>
<li>This will install the latest GitHub release, which is the same version as released on Steam.</li>
</ul>
<h2>Installing Mods</h2>
<p >Mods will be automatically installed during the tModLoader installation step, but can also be installed separately using the <code>--mods-only</code> argument. Simply place any <code>.tmod</code> files, <code>install.txt</code> for workshop mods, and <code>enabled.json</code> into the same directory as the script. Additionally, you can avoid updating or installing mods with the <code>--no-mods</code> argument.</p>
<h3>Obtaining install.txt</h3>
<p >Because the steam workshop does not use mod names to identify mods, you must create a modpack to install mods from the workshop. To get an <code>install.txt</code> file and its accompanying <code>enabled.json</code>:</p><ul>
<li>Go to Workshop</li>
<li>Go to Mod Packs</li>
<li>Click <code>Save Enabled as New Mod Pack</code></li>
<li>Click <code>Open Mod Pack Folder</code>.</li>
<li>Enter the folder with the name of your modpack</li>
</ul>
<p >You can copy <code>enabled.json</code> and <code>install.txt</code> to your script directory and they will be used next time the script is run (run <code>./manage-tModLoaderServer.sh --mods-only</code> to install mods immediately).</p>
<h2>Launching</h2>
<p >To run tModLoader, you just need to navigate to your install directory (<code>~/tModLoader</code> for GitHub, <code>~/Steam/steamapps/common/tModLoader</code> for SteamCMD, by default), and run <code>./start-tModLoaderServer.sh</code>. There is also a <code>--start</code> argument that will launch the game.</p>
<h3>Automatically Selecting A World</h3>
<p >If you want to run tModLoader without needing any input on startup (such as from an init system), then all you need to do is copy the example <a href="https://github.com/tModLoader/tModLoader/tree/1.4/patches/tModLoader/Terraria/release_extras/DedicatedServerUtils/serverconfig.txt">serverconfig.txt</a> and change the settings how you like. Additional options can be found <a href="https://terraria.wiki.gg/wiki/Server#Server_config_file">on the Terraria wiki</a></p>
<h1>Updating</h1>
<p >If an update for <code>manage-tModLoaderServer.sh</code> is available, a message will be printed letting you know one is available. It can be updated using <code>./manage-tModLoaderServer.sh --update-script</code>. An outdated script may contain bugs or lack features, so it is usually a good idea to update.</p>
<p >When using <code>manage-tModLoaderServer.sh</code>, tModLoader updates can be performed with <code>./manage-tModLoaderServer.sh --update</code>. When using a GitHub install, use <code>--github</code>. Use<code>--folder</code> if your install is in a non-standard location. Mods will be updated as well.</p>
<p >When using the Docker container, simply rebuild the container using <code>docker-compose build</code> to update tModLoader. Mods will be updated as well.</p>
<h1>Using The Docker Container</h1>
<p >To install and run the container:</p><ul>
<li>Ensure <code>docker</code> and <code>docker-compose</code> are installed. They can be installed from your package manager or <a href="https://docs.docker.com/engine/install/">Docker's Documentation</a></li>
<li>Download <a href="https://github.com/tModLoader/tModLoader/tree/1.4/patches/tModLoader/Terraria/release_extras/DedicatedServerUtils/Docker/docker-compose.yml">docker-compose.yml</a> and the <a href="https://github.com/tModLoader/tModLoader/tree/1.4/patches/tModLoader/Terraria/release_extras/DedicatedServerUtils/Docker/Dockerfile">Dockerfile</a>.</li>
<li>Next to those docker files, create a folder named <code><a class="el" href="namespace_terraria.html">Terraria</a></code>, and place <code>enabled.json</code>, install.txt, serverconfig.txt, your worlds, and any <code>.tmod</code> files inside.</li>
<li>Edit <code>docker-compose.yml</code> with your GID and UID. These can be found by running <code>id</code>.</li>
<li>Run <code>docker-compose build</code></li>
<li>Run <code>docker-compose up</code></li>
</ul>
<p >The server will be available on port 7777.</p>
<p >To run without any interactivity, use <code>docker-compose up -d</code>, and include serverconfig.txt in the <code><a class="el" href="namespace_terraria.html">Terraria</a></code> directory.</p>
<h1>Autostarting On Boot</h1>
<p >When using <code>manage-tModLoaderServer.sh</code>, refer to your distro's documentation. You can likely use a startup script with your init system.</p>
<p >When using the Docker container, add <code>restart: always</code> within <code>services.tml</code> inside of <code>docker-compose.yml</code>, then rebuild with <code>docker-compose build</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
